<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2A Modas e Perfumes | Sistema Integrado</title>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;700;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="success-toast">
        <div class="st-icon-box"><i class="fas fa-check"></i></div>
        <div class="st-msg" id="st-text">Opera√ß√£o realizada!</div>
        <div class="st-progress-bg"><div class="st-progress-bar"></div></div>
    </div>

    <div id="entry-modal" class="overlay" style="z-index: 20006;">
        <div class="box single-col" style="max-width: 350px; padding: 30px; text-align: center;">
            <h3 style="margin-bottom: 20px;">üí∞ Registrar Entrada</h3>
            <p style="color: #666; margin-bottom: 15px;">Digite o valor pago pelo cliente:</p>
            <input type="number" id="entry-val" class="input" placeholder="R$ 0,00" step="0.01" min="0" style="text-align: center; font-size: 1.5rem; margin-bottom: 20px;">
            <input type="hidden" id="entry-oid">
            <input type="hidden" id="entry-total">
            <button onclick="admin.confirmEntry()" class="btn-modern success" style="width: 100%; margin-bottom: 10px;">Confirmar Pagamento</button>
            <button onclick="app.closeModal('entry-modal')" class="btn-modern outline" style="width: 100%;">Cancelar</button>
        </div>
    </div>

    <div id="custom-confirm-modal" class="overlay" style="z-index: 20000;">
        <div class="box single-col" style="max-width: 400px; text-align: center; padding: 30px;">
            <div class="st-icon-box" style="background: #fff3cd; color: #856404; margin: 0 auto 20px;">
                <i class="fas fa-question"></i>
            </div>
            <h3 id="confirm-title" style="margin-bottom: 10px;">Tem certeza?</h3>
            <p id="confirm-msg" style="color: #666; margin-bottom: 25px;">Essa a√ß√£o n√£o pode ser desfeita.</p>
            <div style="display: flex; gap: 10px;">
                <button id="btn-confirm-no" class="btn-modern outline" style="flex: 1;">Cancelar</button>
                <button id="btn-confirm-yes" class="btn-modern" style="flex: 1;">Sim, Confirmar</button>
            </div>
        </div>
    </div>

    <div id="partial-pay-modal" class="overlay" style="z-index: 10010;">
        <div class="box single-col" style="max-width: 350px; padding: 25px; text-align: center;">
            <h3>üí∏ Pagamento Parcial</h3>
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 15px;">Abater valor de uma parcela espec√≠fica.</p>
            <input type="hidden" id="pp-oid"><input type="hidden" id="pp-idx">
            <label style="display:block; text-align:left; font-size:0.8rem; font-weight:bold; margin-bottom:5px;">Valor Total da Parcela:</label>
            <input type="text" id="pp-total-show" class="input" disabled style="background:#eee;">
            <label style="display:block; text-align:left; font-size:0.8rem; font-weight:bold; margin-bottom:5px; margin-top:10px;">Valor a Pagar Agora:</label>
            <input type="number" id="pp-val" class="input" placeholder="R$ 0,00" step="0.01" min="0" style="font-size: 1.2rem; font-weight: bold; color: var(--success);">
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button onclick="app.closeModal('partial-pay-modal')" class="btn-modern outline" style="flex:1;">Cancelar</button>
                <button onclick="admin.processPartialPay()" class="btn-modern success" style="flex:1;">Confirmar</button>
            </div>
        </div>
    </div>
    
    <div id="loading-screen">
        <i class="fas fa-circle-notch fa-spin fa-3x" style="color:var(--primary);"></i>
        <p style="margin-top:15px; color:#666;">Carregando loja...</p>
    </div>

    <div id="status-bar"></div>

    <div class="header-floating">
        <button class="login-btn-header" onclick="auth.handleHeaderClick()">
            <i class="fas fa-user-circle"></i> Login / Cadastro
        </button>
        <button class="icon-btn" onclick="app.toggleCart()">
            <i class="fas fa-shopping-bag"></i><span class="badge" id="cart-count">0</span>
        </button>
    </div>

    <div class="hero">
        <img src="logo.jpg" onerror="this.src='https://via.placeholder.com/200?text=2A'">
        <h1 class="brand-font">2A Modas e Perfumes</h1>
        <p>Eleg√¢ncia que transforma. Descubra sua ess√™ncia.</p>
        <button class="btn-cta" onclick="app.openPromoModal()">‚ú® Ver Promo√ß√µes</button>
    </div>

    <div class="container" id="vitrine">
        <div class="filters">
            <button class="filter-btn active" onclick="app.filter('all', this)">Todos</button>
            <button class="filter-btn" onclick="app.filter('feminino', this)">Feminino</button>
            <button class="filter-btn" onclick="app.filter('infantil', this)">Infantil</button>
            <button class="filter-btn" onclick="app.filter('perfumes', this)">Perfumes</button>
        </div>
        <div id="products-list" class="grid"></div>
    </div>

    <footer>
        <p class="brand-font">¬© 2025 2A Modas e Perfumes.</p>
        <br>
        <button onclick="admin.showLogin()">√Årea Administrativa</button>
    </footer>

    <div id="promo-modal" class="overlay">
        <div class="box single-col" style="background:var(--bg); overflow:hidden; max-width:800px;">
            <div style="padding:20px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #eee;">
                <h3>üî• Ofertas Especiais</h3>
                <button onclick="app.closeModal('promo-modal')" style="border:none; background:none; font-size:1.5rem;">√ó</button>
            </div>
            <div class="carousel-wrapper" style="padding: 20px;">
                <div id="promo-track" class="promo-list-container"></div>
            </div>
        </div>
    </div>

    <div id="product-modal" class="overlay">
        <div class="box" style="padding: 25px; height: 85vh; max-height: 750px;">
            <div class="product-modal-grid">
                <div class="pm-images" id="m-media-area"></div>
                <div class="pm-details">
                    <button onclick="app.closeModal('product-modal')" style="align-self: flex-end; border:none; background:none; font-size:1.5rem; color:#999; cursor: pointer; margin-bottom: 10px;">√ó</button>
                    <small id="m-cat" style="color:var(--primary); font-weight:800; text-transform:uppercase; letter-spacing: 1px; font-size: 0.8rem;">Categoria</small>
                    <h2 id="m-title" style="margin:5px 0 10px; font-size: 2.2rem; line-height: 1.1;"></h2>
                    <h3 id="m-price" class="pm-price-tag"></h3>
                    <div class="pm-desc-box"><p id="m-desc"></p></div>
                    <div style="margin-bottom:25px;">
                        <label style="font-weight:bold; font-size:0.9rem; margin-bottom:10px; display:block; color: var(--accent);">Escolha uma op√ß√£o:</label>
                        <div id="m-vars" class="var-chip-container"></div>
                    </div>
                    <div style="margin-top: auto;">
                        <div style="margin-bottom: 15px; color:#27ae60; font-weight:600; font-size: 0.9rem; display: flex; align-items: center; gap: 8px;">
                            <i class="fas fa-truck"></i> Entrega: 03 a 05 dias √∫teis
                        </div>
                        <div style="display:flex; gap:15px;">
                            <div style="border:1px solid #ddd; border-radius:30px; display:flex; align-items: center; height: 55px;">
                                <button onclick="app.updQty(-1)" style="padding:0 15px; border:none; background:transparent; font-size: 1.2rem;">-</button>
                                <span id="m-qty" style="font-weight:bold; width: 20px; text-align: center;">1</span>
                                <button onclick="app.updQty(1)" style="padding:0 15px; border:none; background:transparent; font-size: 1.2rem;">+</button>
                            </div>
                            <button onclick="app.addCart()" class="btn-modern btn-cta" style="flex:1; height: 55px; font-size: 1.1rem; margin-top: 0;">Adicionar √† Sacola</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="address-modal" class="overlay" style="justify-content:flex-start; padding-left:20px; z-index:10001;">
        <div class="box single-col" style="width:100%; max-width:500px; height:auto; overflow-y: auto;">
            <div style="padding:25px;">
                <h3>üìç Onde entregar?</h3>
                <div id="saved-addresses-list" style="margin-bottom:20px; max-height:150px; overflow-y:auto;"></div>
                <div style="background:#f9f9f9; padding:20px; border-radius:16px;">
                    <h4>Novo Endere√ßo</h4>
                    <div class="input-cep-grid">
                        <input type="text" id="addr-cep" class="input" placeholder="CEP (00000-000)" onblur="app.fetchCep(this.value, 'addr')" maxlength="9">
                        <a href="https://buscacepinter.correios.com.br/app/endereco/index.php" target="_blank" style="font-size:0.8rem; display:flex; align-items:center;">N√£o sei meu CEP</a>
                    </div>
                    <input type="text" id="addr-street" class="input" placeholder="Rua / Logradouro">
                    <div class="input-row">
                        <input type="text" id="addr-num" class="input" placeholder="N√∫mero">
                        <input type="text" id="addr-bairro" class="input" placeholder="Bairro">
                    </div>
                    <div class="input-row">
                        <input type="text" id="addr-city" class="input" placeholder="Cidade">
                        <input type="text" id="addr-uf" class="input" placeholder="Estado (UF)" maxlength="2">
                    </div>
                    <input type="text" id="addr-ref" class="input" placeholder="Ponto de Refer√™ncia">
                    <input type="text" id="addr-name" class="input" placeholder="Nome de quem recebe">
                    <input type="text" id="addr-phone" class="input" placeholder="Telefone / WhatsApp">
                    <label style="display:block; margin:10px 0; font-weight:bold;">Salvar como:</label>
                    <select id="addr-type" class="input">
                        <option value="Casa">Casa</option>
                        <option value="Trabalho">Trabalho</option>
                        <option value="Outro">Outro</option>
                    </select>
                    <button onclick="app.addNewAddress()" class="btn-modern" style="width:100%;">Salvar Endere√ßo</button>
                </div>
                <button onclick="app.closeModal('address-modal')" style="width:100%; margin-top:15px; background:none; border:none; color:#666;">Fechar</button>
            </div>
        </div>
    </div>

    <div id="client-modal" class="overlay" style="z-index:10005;">
        <div class="box" style="max-width:900px; height:90vh; padding:0; display:flex; flex-direction:column;">
            <div style="padding:20px; border-bottom:1px solid #eee; display:flex; justify-content:space-between; align-items:center;">
                <h2 style="color:var(--accent);"><i class="fas fa-user-circle"></i> Minha Conta</h2>
                <button onclick="app.closeModal('client-modal')" style="border:none; background:none; font-size:1.5rem;">√ó</button>
            </div>
            <div style="flex:1; overflow-y:auto; padding:20px;">
                <div style="display:grid; grid-template-columns: 1fr 1.5fr; gap:30px;" class="responsive-grid">
                    <div>
                        <div style="background:#f8f9fa; padding:20px; border-radius:16px; border:1px solid #eee;">
                            <h4 style="margin-bottom:15px; color:var(--primary);">Meus Dados</h4>
                            <label style="font-size:0.8rem; font-weight:bold;">Nome</label>
                            <input type="text" id="c-profile-name" class="input">
                            <label style="font-size:0.8rem; font-weight:bold;">Email</label>
                            <input type="text" id="c-profile-email" class="input" disabled style="background:#eee;">
                            <label style="font-size:0.8rem; font-weight:bold;">Telefone</label>
                            <input type="text" id="c-profile-phone" class="input">
                            <button onclick="auth.updateProfileData()" class="btn-modern small outline" style="width:100%; margin-top:10px;">Salvar Altera√ß√µes</button>
                        </div>
                        <div style="margin-top:20px;">
                            <h4 style="margin-bottom:10px;">Meus Endere√ßos</h4>
                            <div id="c-profile-addrs" style="max-height:200px; overflow-y:auto;"></div>
                            <button onclick="app.openAddressModal()" class="btn-modern small" style="width:100%; margin-top:10px;">+ Adicionar Novo</button>
                        </div>
                        <button onclick="auth.logout()" class="btn-modern danger small" style="margin-top:30px; width:100%;">Sair da Conta</button>
                    </div>
                    <div>
                        <h3 style="margin-bottom:15px;">Meus Pedidos</h3>
                        <div id="client-orders-list"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="sidebar">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-bottom:1px solid #eee; padding-bottom:15px;">
            <h2 style="margin:0;">Sua Sacola</h2>
            <button onclick="app.toggleCart()" style="border:none; background:none; font-size:1.5rem; color:#999;">√ó</button>
        </div>
        <div style="background: white; border: 1px solid #eee; padding: 15px; border-radius: 16px; margin-bottom: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); display: flex; align-items: center; gap: 10px;">
            <i class="fas fa-truck" style="color: var(--success); font-size: 1.2rem;"></i>
            <div>
                <strong style="display: block; font-size: 0.9rem;">Entrega R√°pida</strong>
                <small style="color: #666;">Receba em 03 a 05 dias √∫teis</small>
            </div>
        </div>
        <div style="flex:1; overflow-y:auto;">
            <ul id="cart-list" style="list-style:none;"></ul>
        </div>
        <div style="border-top:1px solid #eee; padding-top:25px;">
            <div id="cart-auth-area" style="margin-bottom:15px;">
                <button onclick="app.showModal('auth-modal')" style="width:100%; padding:12px; background:#f0f0f0; border:none; border-radius:12px; color:#555; font-weight:bold;">
                    <i class="fas fa-user-circle"></i> Fazer Login / Cadastro
                </button>
            </div>
            <button id="btn-address-trigger" onclick="app.openAddressModal()" class="btn-addr-trigger">
                <i class="fas fa-map-marker-alt"></i> Cadastrar local de entrega
            </button>
            <div style="background: #fafafa; padding: 15px; border-radius: 12px; margin-bottom: 20px;">
                <div style="display:flex; justify-content:space-between; font-weight:bold; font-size:1.1rem; color: var(--accent);">
                    <span>Total</span> <span id="cart-total">R$ 0.00</span>
                </div>
            </div>
            <button onclick="app.checkout('whatsapp')" class="btn-modern btn-whatsapp btn-pulse" style="width: 100%; margin-bottom: 10px;">
                <i class="fab fa-whatsapp"></i> Falar Via WhatsApp
            </button>
            <button onclick="app.checkout('mercadopago')" class="btn-modern btn-mp btn-pulse" style="width: 100%;">
                <i class="fas fa-qrcode"></i> Pagar via Pix/Cart√£o
            </button>
        </div>
    </div>

    <div id="auth-modal" class="overlay" style="z-index:10002;">
        <div class="box single-col" style="padding:30px; max-width:450px; max-height:90vh; overflow-y:auto;">
            <h2 id="auth-title" style="margin-bottom:20px; text-align:center;">Acesso</h2>
            <div id="form-login">
                <input type="email" id="l-email" class="input" placeholder="E-mail">
                <input type="password" id="l-pass" class="input" placeholder="Senha">
                <button onclick="auth.login()" class="btn-modern" style="width:100%;">Entrar</button>
                <p style="margin-top:20px; font-size:0.9rem; text-align:center;">N√£o tem conta? <a href="#" onclick="auth.toggle('register')" style="color:var(--primary); font-weight:bold;">Cadastre-se</a></p>
            </div>
            <div id="form-register" style="display:none;">
                <h4 style="margin-bottom:10px; color:var(--accent);">Seus Dados</h4>
                <input type="text" id="r-name" class="input" placeholder="Nome Completo">
                <input type="text" id="r-phone" class="input" placeholder="WhatsApp / Telefone">
                <input type="email" id="r-email" class="input" placeholder="E-mail">
                <input type="password" id="r-pass" class="input" placeholder="Senha">
                
                <h4 style="margin:15px 0 10px; color:var(--accent);">Endere√ßo Principal</h4>
                <div class="input-cep-grid">
                    <input type="text" id="r-cep" class="input" placeholder="CEP" onblur="app.fetchCep(this.value, 'reg')">
                    <span style="font-size:0.75rem; color:#888; display:flex; align-items:center;">Busca Autom√°tica</span>
                </div>
                <input type="text" id="r-street" class="input" placeholder="Rua">
                <div class="input-row">
                    <input type="text" id="r-num" class="input" placeholder="N√∫mero">
                    <input type="text" id="r-bairro" class="input" placeholder="Bairro">
                </div>
                <div class="input-row">
                    <input type="text" id="r-city" class="input" placeholder="Cidade">
                    <input type="text" id="r-uf" class="input" placeholder="UF">
                </div>

                <button onclick="auth.register()" class="btn-modern success" style="width:100%; margin-top:15px;">Criar Conta</button>
                <p style="margin-top:20px; font-size:0.9rem; text-align:center;"><a href="#" onclick="auth.toggle('login')">Voltar ao Login</a></p>
            </div>
            <button onclick="app.closeModal('auth-modal')" style="position:absolute; top:20px; right:20px; border:none; background:none; font-size:1.5rem;">√ó</button>
        </div>
    </div>

    <div id="admin-auth-modal" class="overlay" style="z-index:10003;">
        <div class="box single-col" style="max-width: 350px;">
            <i class="fas fa-lock"></i>
            <h2>√Årea Restrita</h2>
            <p style="margin-bottom:20px; color:#666;">Acesso administrativo seguro</p>
            <input type="email" id="admin-email" class="input" placeholder="E-mail Admin" value="loja@2amoda.com">
            <input type="password" id="admin-pass" class="input" placeholder="Sua senha" style="text-align:center; font-size:1.2rem;" onkeydown="if(event.key==='Enter') admin.verifyLogin()">
            <button onclick="admin.verifyLogin()" class="btn-modern" style="width:100%;">Entrar</button>
            <button onclick="app.closeModal('admin-auth-modal')" style="background:none; border:none; color:#999; text-decoration:underline; margin-top:10px;">Cancelar</button>
        </div>
    </div>

    <div id="admin-modal" class="overlay" style="z-index:2001; background:#f4f6f9; align-items:flex-start; padding:0;">
        <div class="box" style="max-width:100%; height:100%; border-radius:0; padding:0; display:flex; flex-direction:column;">
            <div class="admin-nav">
                <h3 style="margin-right:20px; align-self:center;">Admin 2A</h3>
                <button onclick="admin.tab('new-order')" class="admin-tab" style="color:var(--primary); border-color:var(--primary);"><i class="fas fa-plus-circle"></i> Novo Pedido</button>
                <button onclick="admin.tab('dash')" class="admin-tab active">Estoque</button>
                <button onclick="admin.tab('pay')" class="admin-tab">Gest√£o Completa</button>
                <button onclick="admin.tab('clients')" class="admin-tab">Clientes</button> <button onclick="admin.tab('prod')" class="admin-tab">Produtos</button>
                <button onclick="admin.resetData()" class="btn-modern danger small" style="margin-left:20px;">Resetar</button>
                <button onclick="admin.logout()" class="btn-modern outline small" style="margin-left:auto;">Sair</button>
            </div>
            
            <div style="flex:1; overflow-y:auto; padding:30px; width:100%; max-width:1200px; margin:0 auto;">
                
                <div id="tab-dash">
                    <div style="display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-bottom:30px;">
                        <div style="background:white; padding:25px; border-radius:16px; text-align:center; box-shadow: var(--shadow);">
                            <div style="color:var(--success); font-weight:bold;">VALOR EM ESTOQUE</div>
                            <div class="stat-val" id="st-rev" style="font-size:1.8rem; font-weight:bold;">R$ 0.00</div>
                        </div>
                        <div style="background:white; padding:25px; border-radius:16px; text-align:center; box-shadow: var(--shadow);">
                            <div style="color:var(--danger); font-weight:bold;">CUSTO TOTAL</div>
                            <div class="stat-val" id="st-cost" style="font-size:1.8rem; font-weight:bold;">R$ 0.00</div>
                        </div>
                        <div style="background:white; padding:25px; border-radius:16px; text-align:center; box-shadow: var(--shadow);">
                            <div style="color:var(--info); font-weight:bold;">QTD ITENS</div>
                            <div class="stat-val" id="st-qty" style="font-size:1.8rem; font-weight:bold;">0</div>
                        </div>
                    </div>
                    <div style="background:white; padding:25px; border-radius:16px; box-shadow: var(--shadow);">
                        <h4>Vis√£o Geral do Estoque</h4>
                        <div id="dash-stock-grid" class="dashboard-grid"></div>
                    </div>
                </div>

                <div id="tab-orders" style="display:none;"></div>

                <div id="tab-new-order" style="display:none;">
                    <div style="background:white; padding:30px; border-radius:16px; box-shadow: var(--shadow); max-width: 900px; margin: 0 auto;">
                        <h3><i class="fas fa-edit"></i> Novo Pedido</h3>
                        
                        <div class="manual-order-grid">
                            <div style="background:#f9f9f9; padding:20px; border-radius:12px;">
                                <h4 style="margin-bottom:15px; color:var(--accent);">1. Identifica√ß√£o do Cliente</h4>
                                
                                <label style="font-weight:bold; font-size:0.85rem;">Selecione Cliente Cadastrado:</label>
                                <div style="display:flex; gap:10px; margin-bottom:15px;">
                                    <select id="m-existing-client" class="input" style="margin:0;" onchange="admin.fillClientData(this.value)">
                                        <option value="">-- Buscar Cliente --</option>
                                    </select>
                                    <button onclick="document.getElementById('manual-client-form').style.display='block'; document.getElementById('m-existing-client').value=''" class="btn-modern small outline" title="Novo"><i class="fas fa-plus"></i></button>
                                </div>

                                <div id="manual-client-form">
                                    <input type="hidden" id="m-client-id"> <input type="text" id="m-client-name" class="input" placeholder="Nome Completo">
                                    <input type="email" id="m-client-email" class="input" placeholder="E-mail (Opcional)">
                                    <input type="text" id="m-client-phone" class="input" placeholder="WhatsApp">
                                    
                                    <hr style="margin:15px 0; border:0; border-top:1px dashed #ddd;">
                                    
                                    <div class="input-cep-grid">
                                        <input type="text" id="m-client-cep" class="input" placeholder="CEP" onblur="app.fetchCep(this.value, 'manual')">
                                        <span style="font-size:0.75rem; color:#888;">Auto</span>
                                    </div>
                                    <input type="text" id="m-client-street" class="input" placeholder="Rua">
                                    <div class="input-row">
                                        <input type="text" id="m-client-num" class="input" placeholder="N√∫mero">
                                        <input type="text" id="m-client-bairro" class="input" placeholder="Bairro">
                                    </div>
                                    <div class="input-row">
                                        <input type="text" id="m-client-city" class="input" placeholder="Cidade">
                                        <input type="text" id="m-client-uf" class="input" placeholder="UF">
                                    </div>
                                </div>
                                
                                <h4 style="margin:20px 0 10px; color:var(--accent);">2. Pagamento</h4>
                                <div class="input-row">
                                    <select id="m-payment-method" class="input">
                                        <option value="Dinheiro">Dinheiro</option>
                                        <option value="Pix">Pix</option>
                                        <option value="Cart√£o">Cart√£o</option>
                                        <option value="Credi√°rio">Credi√°rio/Fiado</option>
                                    </select>
                                    <select id="m-payment-status" class="input">
                                        <option value="Pago">Pago</option>
                                        <option value="Pendente">Pendente</option>
                                    </select>
                                </div>
                            </div>

                            <div>
                                <h4 style="margin-bottom:15px; color:var(--accent);">3. Itens do Pedido</h4>
                                <div class="manual-prod-adder">
                                    <select id="m-prod-select" class="input" style="margin:0; flex:2;"><option value="">Selecione produto...</option></select>
                                    <input type="number" id="m-prod-qty" class="input" value="1" min="1" style="margin:0; width:60px; text-align:center;">
                                    <button onclick="admin.addManualItem()" class="btn-modern small"><i class="fas fa-plus"></i></button>
                                </div>
                                
                                <div class="manual-cart-list" id="manual-cart-list" style="min-height:100px; background:white; border:1px solid #eee; margin-top:10px;">
                                    <div style="padding:15px; text-align:center; color:#999;">Nenhum item</div>
                                </div>
                                
                                <div style="display:flex; justify-content:space-between; align-items:center; margin-top:15px; font-size:1.4rem; font-weight:800; color:var(--accent); background:#f0f0f0; padding:15px; border-radius:12px;">
                                    <span>Total</span><span id="m-total-display">R$ 0.00</span>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top:30px; text-align:right;">
                            <button onclick="admin.saveManualOrder()" class="btn-modern" style="width:100%; justify-content:center; font-size:1.1rem; padding:15px;">
                                <i class="fas fa-check-circle"></i> Finalizar Pedido
                            </button>
                        </div>
                    </div>
                </div>

                <div id="tab-pay" style="display:none;">
                    <div style="background:white; padding:25px; border-radius:16px; box-shadow: var(--shadow);">
                        <h3>Gest√£o Completa (Pedidos)</h3>
                        <div class="filter-wrapper" style="background: #f0f9ff; border-color: #dbeafe;">
                            <div class="date-group"> <label>De:</label> <input type="text" id="fin-start" class="flatpickr-input compact-date"> </div>
                            <div class="date-group"> <label>At√©:</label> <input type="text" id="fin-end" class="flatpickr-input compact-date"> </div>
                        </div>
                        <div class="fin-grid">
                            <div class="fin-card-modern profit" style="background: linear-gradient(135deg, #e0f2f1 0%, #ffffff 100%); border-left: 5px solid #27ae60;">
                                <div class="fin-label" style="color:#27ae60;">üí∞ Total Recebido</div>
                                <div id="fin-real-revenue" class="fin-val-big" style="color:#27ae60;">R$ 0.00</div>
                            </div>
                            <div class="fin-card-modern cost" style="background: linear-gradient(135deg, #fff3e0 0%, #ffffff 100%); border-left: 5px solid #e67e22;">
                                <div class="fin-label" style="color:#e67e22;">‚è≥ Total a Receber</div>
                                <div id="fin-total-created" class="fin-val-big" style="color:#e67e22;">R$ 0.00</div>
                            </div>
                        </div>
                        <div id="pay-list"></div>
                    </div>
                </div>

                <div id="tab-clients" style="display:none;">
                    <div style="background:white; padding:25px; border-radius:16px; box-shadow: var(--shadow);">
                        <h3>Base de Clientes</h3>
                        <p style="color:#666; margin-bottom:20px;">Todos os clientes cadastrados no site ou manualmente.</p>
                        <div id="clients-table-list" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap:20px;"></div>
                    </div>
                </div>

                <div id="tab-prod" style="display:none;">
                    <div style="background:white; padding:30px; border-radius:16px; margin-bottom:30px; box-shadow: var(--shadow);">
                        <h3>Cadastro de Produto</h3>
                        <input type="hidden" id="edit-id">
                        <input type="text" id="f-name" class="input" placeholder="Nome do Produto">
                        <div style="display:flex; gap:15px;">
                            <select id="f-cat" class="input"><option value="feminino">Feminino</option><option value="infantil">Infantil</option><option value="perfumes">Perfumes</option></select>
                            <input type="number" id="f-cost" class="input" placeholder="Custo (Opcional)" step="0.01" min="0">
                        </div>
                        <div class="input-row">
                            <input type="number" id="f-price-global" class="input" placeholder="Pre√ßo Venda" step="0.01" min="0">
                            <input type="number" id="f-stock-global" class="input" placeholder="Estoque Geral" min="0">
                        </div>
                        <div style="margin: 20px 0; display:flex; align-items:center;">
                            <label class="toggle-switch"><input type="checkbox" id="f-promo"><span class="slider"></span></label>
                            <span class="toggle-label">Ativar Promo√ß√£o?</span>
                        </div>
                        <div class="file-upload-wrapper" onclick="document.getElementById('f-file').click()">
                            <i class="fas fa-cloud-upload-alt" style="font-size:2.5rem; color:#ccc; margin-bottom:10px;"></i>
                            <p style="margin:5px 0; color:#555; font-weight:bold;">Adicionar fotos/v√≠deos</p>
                            <input type="file" id="f-file" multiple accept="image/*,video/*" onchange="admin.handleFileSelect(this)">
                        </div>
                        <div id="file-preview-area" class="file-preview-grid"></div>
                        <hr style="margin:25px 0; border:0; border-top:1px solid #eee;">
                        <label style="font-weight:bold; display:block; margin-bottom:15px;">Varia√ß√µes:</label>
                        <span class="checkbox-section-title">üé® Cores</span>
                        <div class="modern-checkbox-grid" id="color-checks"></div>
                        <span class="checkbox-section-title">üìè Tamanhos</span>
                        <div class="modern-checkbox-grid" id="volume-checks"></div>
                        <div id="active-vars-area"></div>
                        <textarea id="f-desc" class="input" rows="3" placeholder="Descri√ß√£o" style="margin-top:20px;"></textarea>
                        <div style="display:flex; gap:10px; margin-top:20px;">
                            <button onclick="admin.save()" id="btn-save" class="btn-modern" style="flex:2;">Salvar Produto</button>
                            <button onclick="admin.clear()" class="btn-modern outline" style="flex:1;">Limpar</button>
                        </div>
                    </div>
                    <div style="background:white; padding:25px; border-radius:16px; overflow-y:auto; max-height:80vh; box-shadow: var(--shadow);">
                        <h3>Lista de Produtos</h3>
                        <div id="admin-list" style="margin-top:20px;"></div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>

